---
title: "Questionnaire results"
author: "Eduard Sz√∂cs"
date: "November 2, 2015"
output: 
#     pdf_document:
#       fig_width: 4
#       fig_height: 3
  md_document:
    variant: markdown_github
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Results from the questionnaire

This is just a Quick and Dirty analysis...


## Load the data
```{r load_data}
prj <- '/home/edisz/Documents/Uni/Projects/PHD/CONFERENCES/AufLand'
df <- read.csv(file.path(prj, 'questionnaire/questionnaire.csv'), 
                 sep = ',', header = TRUE, quote = "\"", 
               stringsAsFactors = FALSE)
```

```{r echo=FALSE}
str(df)
```

Looks OK, but quite long column names....


## Clean the data
```{r}
# shorten the colnames
colnames(df) <- c('date', 'theory', 'prog', 'rknow', 'curr', 'inter', 'one', 
                  'two', 'three', 'four', 'five', 'sugg', 'backg', 'name',
                  'email', 'affl', 'pos', 'laptop')
str(df)
```

From the `affl` column, we see that the Uni-Landau was entered in different ways.
Lets create a new column coding if the attendee comes from Landau. 

We can use columns `email` and `affl` to check if an attendee come form landau.
We use [regular expressions](https://en.wikipedia.org/wiki/Regular_expression) to match the word 'landau' in both columns.
Note, that I compare only lowercase strings, as this saves 2 comparisons.

Character vectors can be translated to lowercase using `tolower()`:
```{r}
tolower(df$affl)
```

We can check if a string contains `'landau'` using the function `grepl()` (= global regular expression, l stands for logical which is the output):

```{r}
grepl(pattern = 'landau', df$email)
```

I a last step we combine both using the logical `OR` and save as new variable:

```{r}
df$fromlandau <- grepl(pattern = 'landau', df$email) | grepl(pattern = 'landau', tolower(df$affl))
```



## Plot the data

### How many attendies replied and where are they from?

We have only 11 repsonses:

```{r}
nrow(df)
```

from which the majority

```{r}
sum(df$fromlandau)
```

are from Landau.


```{r message = FALSE}
require(ggplot2)
require(RColorBrewer)
classPalette = colorRampPalette(brewer.pal(5, "Dark2"))
```

```{r plot_fromlandau}
nlev <- length(unique(df$fromlandau))
ggplot(df, aes(x = factor(1), fill = df$fromlandau)) +
  geom_bar() +
  scale_fill_manual(values = classPalette(nlev)) +
  guides(fill= guide_legend(reverse=TRUE, title = 'from Landau?'))
```


### What room do we need?
Note that we need a computer room, as two attendees won't bring their laptop. 
Or we provide laptops?!

```{r plot_laptop}
nlev <- length(unique(df$laptop))
ggplot(df, aes(x = factor(1), fill = df$laptop)) +
  geom_bar() +
  scale_fill_manual(values = classPalette(nlev)) +
  guides(fill= guide_legend(reverse=TRUE, title = 'bring laptop?'))
sum(df$laptop == 'no') / nrow(df) * 100
```


### What's the backgound knowledge?

```{r message=FALSE}
nlev <- length(unique(df$prog))
ggplot(df, aes(x = factor(1), fill = prog)) +
  geom_bar() +
  scale_fill_manual(values = classPalette(nlev)) +
  ggtitle('Programming')
```

```{r message=FALSE}
nlev <- length(unique(df$theory))
ggplot(df, aes(x = factor(1), fill = abbreviate(theory))) +
  geom_bar() +
  scale_fill_manual(values = classPalette(nlev)) +
  ggtitle('Theory')
```


```{r message=FALSE}
nlev <- length(unique(df$rknow))
ggplot(df, aes(x = factor(1), fill = abbreviate(rknow))) +
  geom_bar() +
  ggtitle('R knowledge') +
  facet_wrap(~fromlandau)
```


```{r}
nlev <- length(unique(df$curr))
ggplot(df, aes(x = factor(1), fill = abbreviate(curr))) +
  geom_bar() +
  scale_fill_manual(values = classPalette(nlev)) +
  ggtitle('Software usage') +
  facet_wrap(~fromlandau)
```


* Generally wide spread R knowledge and usage!
* One attendee without any R knowledge (T.S. from Landau) (Check if its fine if we don't start with the very basics?!)
* From outside: One who's not using R (!), others are beginners or intermediate.


### What is needed?

